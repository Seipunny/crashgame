<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ –§–∏–Ω–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç RTP - –ö—Ä–∞—à-–∏–≥—Ä–∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .controls {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .control-group {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .control-group label {
            font-weight: 600;
            color: #495057;
            min-width: 120px;
        }
        
        .control-group input, .control-group select {
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .output {
            padding: 30px;
            background: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .stat-card h3 {
            margin: 0 0 10px 0;
            color: #495057;
            font-size: 1.1em;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ –§–∏–Ω–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç RTP</h1>
            <p>–ö—Ä–∞—à-–∏–≥—Ä–∞ - –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–π</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="rounds">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤:</label>
                <input type="number" id="rounds" value="1000000" min="1000" max="10000000">
            </div>
            
            <div class="control-group">
                <label for="behaviorType">–¢–∏–ø –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤:</label>
                <select id="behaviorType">
                    <option value="standard">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ</option>
                    <option value="conservative">–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–µ</option>
                    <option value="simple">–ü—Ä–æ—Å—Ç–æ–µ</option>
                    <option value="all">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö</option>
                </select>
            </div>
            
            <div class="control-group">
                <button class="btn" onclick="startTest()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
                <button class="btn" onclick="clearOutput()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...</p>
            </div>
        </div>
        
        <div class="output" id="output"></div>
        
        <div class="stats-grid" id="statsGrid"></div>
    </div>

    <script>
        // –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è RTP 96%
        function generateCrashPoint() {
            const random = Math.random();
            
            // –î–ª—è RTP 96% –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É–ª—É
            // RTP = 96% –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç 96% –æ—Ç —Å–≤–æ–∏—Ö —Å—Ç–∞–≤–æ–∫
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º 0.96
            const crashPoint = -Math.log(1 - random) / 0.96;
            
            return Math.max(1.01, Math.min(crashPoint, 1000));
        }

        // –ü–†–ê–í–ò–õ–¨–ù–ê–Ø —Å–∏–º—É–ª—è—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤
        function simulatePlayerBehavior(crashPoint) {
            const random = Math.random();
            
            // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å - –∏–≥—Ä–æ–∫–∏ –∫–µ—à–∞—É—Ç—è—Ç—Å—è —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
            // –î–ª—è RTP 96% –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∏–≥—Ä–æ–∫–∏ –∫–µ—à–∞—É—Ç–∏–ª–∏—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 96% —Å–ª—É—á–∞–µ–≤
            const cashoutProbability = 0.96; // 96% –∏–≥—Ä–æ–∫–æ–≤ —É—Å–ø–µ–≤–∞—é—Ç –∫–µ—à–∞—É—Ç–∏—Ç—å—Å—è
            
            if (random < cashoutProbability) {
                // –ò–≥—Ä–æ–∫ –∫–µ—à–∞—É—Ç–∏—Ç—Å—è –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–π —Ç–æ—á–∫–µ –¥–æ –∫—Ä–∞—à–∞
                const cashoutPoint = 1 + (random * (crashPoint - 1));
                return cashoutPoint;
            }
            
            return 0; // 4% –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –∫–µ—à–∞—É—Ç–∏—Ç—å—Å—è
        }

        // –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
        function simulatePlayerBehaviorConservative(crashPoint) {
            const random = Math.random();
            
            // –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å - –∏–≥—Ä–æ–∫–∏ –∫–µ—à–∞—É—Ç—è—Ç—Å—è —Ä–∞–Ω—å—à–µ
            const cashoutProbability = 0.90; // 90% –∏–≥—Ä–æ–∫–æ–≤ —É—Å–ø–µ–≤–∞—é—Ç –∫–µ—à–∞—É—Ç–∏—Ç—å—Å—è
            
            if (random < cashoutProbability) {
                // –ò–≥—Ä–æ–∫ –∫–µ—à–∞—É—Ç–∏—Ç—Å—è –Ω–∞ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–µ–π —Ç–æ—á–∫–µ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
                const cashoutPoint = 1 + (random * 0.5 * (crashPoint - 1));
                return cashoutPoint;
            }
            
            return 0; // 10% –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –∫–µ—à–∞—É—Ç–∏—Ç—å—Å—è
        }

        // –ü–†–û–°–¢–ê–Ø –º–æ–¥–µ–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
        function simulatePlayerBehaviorSimple(crashPoint) {
            const random = Math.random();
            
            // –ü—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å - –∏–≥—Ä–æ–∫–∏ –∫–µ—à–∞—É—Ç—è—Ç—Å—è —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 96%
            const cashoutProbability = 0.96; // 96% –∏–≥—Ä–æ–∫–æ–≤ —É—Å–ø–µ–≤–∞—é—Ç –∫–µ—à–∞—É—Ç–∏—Ç—å—Å—è
            
            if (random < cashoutProbability) {
                // –ò–≥—Ä–æ–∫ –∫–µ—à–∞—É—Ç–∏—Ç—Å—è –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–π —Ç–æ—á–∫–µ –¥–æ –∫—Ä–∞—à–∞
                const cashoutPoint = 1 + (random * (crashPoint - 1));
                return cashoutPoint;
            }
            
            return 0; // 4% –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ UI
        function log(message) {
            const output = document.getElementById('output');
            output.textContent += message + '\n';
            output.scrollTop = output.scrollHeight;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress(percent) {
            document.getElementById('progressFill').style.width = percent + '%';
        }

        // –¢–µ—Å—Ç RTP —Å —Ñ–∏–Ω–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–π
        async function testRTP(rounds = 1000000, behaviorType = 'standard') {
            log(`\nüßÆ –ó–∞–ø—É—Å–∫ –§–ò–ù–ê–õ–¨–ù–û –ü–†–ê–í–ò–õ–¨–ù–û–ì–û —Ç–µ—Å—Ç–∞ RTP –Ω–∞ ${rounds.toLocaleString()} —Ä–∞—É–Ω–¥–æ–≤...`);
            log(`üë• –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤: ${behaviorType}`);
            
            const startTime = Date.now();
            
            let totalBets = 0;
            let totalPayouts = 0;
            let totalGames = 0;
            let wins = 0;
            let losses = 0;
            
            const crashRanges = {
                '1.01-2.00': 0,
                '2.01-5.00': 0,
                '5.01-10.00': 0,
                '10.01-20.00': 0,
                '20.01-50.00': 0,
                '50.01-100.00': 0,
                '100.01+': 0
            };
            
            let maxCrashPoint = 0;
            let maxWin = 0;
            
            return new Promise((resolve) => {
                let i = 0;
                
                function processBatch() {
                    const batchSize = 10000;
                    const endIndex = Math.min(i + batchSize, rounds);
                    
                    for (; i < endIndex; i++) {
                        const betAmount = 100;
                        const crashPoint = generateCrashPoint();
                        
                        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
                        let cashoutMultiplier = 0;
                        if (behaviorType === 'conservative') {
                            cashoutMultiplier = simulatePlayerBehaviorConservative(crashPoint);
                        } else if (behaviorType === 'simple') {
                            cashoutMultiplier = simulatePlayerBehaviorSimple(crashPoint);
                        } else {
                            cashoutMultiplier = simulatePlayerBehavior(crashPoint);
                        }
                        
                        totalBets += betAmount;
                        totalGames++;
                        
                        if (cashoutMultiplier > 0) {
                            const winAmount = betAmount * cashoutMultiplier;
                            totalPayouts += winAmount;
                            wins++;
                            
                            if (winAmount > maxWin) {
                                maxWin = winAmount;
                            }
                        } else {
                            losses++;
                        }
                        
                        if (crashPoint <= 2.00) crashRanges['1.01-2.00']++;
                        else if (crashPoint <= 5.00) crashRanges['2.01-5.00']++;
                        else if (crashPoint <= 10.00) crashRanges['5.01-10.00']++;
                        else if (crashPoint <= 20.00) crashRanges['10.01-20.00']++;
                        else if (crashPoint <= 50.00) crashRanges['20.01-50.00']++;
                        else if (crashPoint <= 100.00) crashRanges['50.01-100.00']++;
                        else crashRanges['100.01+']++;
                        
                        if (crashPoint > maxCrashPoint) {
                            maxCrashPoint = crashPoint;
                        }
                    }
                    
                    const progress = (i / rounds * 100);
                    updateProgress(progress);
                    
                    if (i % 100000 === 0 && i > 0) {
                        const currentRTP = (totalPayouts / totalBets * 100).toFixed(2);
                        log(`üìà –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress.toFixed(1)}% | –¢–µ–∫—É—â–∏–π RTP: ${currentRTP}%`);
                    }
                    
                    if (i < rounds) {
                        setTimeout(processBatch, 0);
                    } else {
                        const endTime = Date.now();
                        const duration = (endTime - startTime) / 1000;
                        
                        const rtp = totalPayouts / totalBets;
                        const winRate = wins / totalGames;
                        const houseEdge = 1 - rtp;
                        
                        log("\n" + "=".repeat(50));
                        log("üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –§–ò–ù–ê–õ–¨–ù–û –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –¢–ï–°–¢–ê RTP");
                        log("=".repeat(50));
                        
                        log(`üéØ –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤: ${rounds.toLocaleString()}`);
                        log(`‚è±Ô∏è  –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${duration.toFixed(2)} —Å–µ–∫—É–Ω–¥`);
                        log(`üìà –°–∫–æ—Ä–æ—Å—Ç—å: ${(rounds / duration).toLocaleString()} —Ä–∞—É–Ω–¥–æ–≤/—Å–µ–∫`);
                        
                        log(`\nüí∞ –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò:`);
                        log(`üì• –û–±—â–∏–µ —Å—Ç–∞–≤–∫–∏: ${totalBets.toLocaleString()}`);
                        log(`üì§ –û–±—â–∏–µ –≤—ã–ø–ª–∞—Ç—ã: ${totalPayouts.toLocaleString()}`);
                        log(`üéØ RTP: ${(rtp * 100).toFixed(4)}%`);
                        log(`üè† House Edge: ${(houseEdge * 100).toFixed(4)}%`);
                        log(`üìä –í–∏–Ω—Ä–µ–π—Ç: ${(winRate * 100).toFixed(2)}%`);
                        
                        log(`\nüèÜ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø:`);
                        log(`üî• –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—Ä–∞—à: x${maxCrashPoint.toFixed(2)}`);
                        log(`üí∞ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: ${maxWin.toFixed(2)}`);
                        
                        log(`\nüìä –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ö–†–ê–®–ï–ô:`);
                        for (const [range, count] of Object.entries(crashRanges)) {
                            const percentage = (count / rounds * 100).toFixed(2);
                            log(`${range}: ${count.toLocaleString()} (${percentage}%)`);
                        }
                        
                        log(`\nüéÆ –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ì–†:`);
                        log(`‚úÖ –í—ã–∏–≥—Ä—ã—à–∏: ${wins.toLocaleString()} (${(wins/totalGames*100).toFixed(2)}%)`);
                        log(`‚ùå –ü—Ä–æ–∏–≥—Ä—ã—à–∏: ${losses.toLocaleString()} (${(losses/totalGames*100).toFixed(2)}%)`);
                        
                        log(`\nüìà –û–¶–ï–ù–ö–ê –ö–ê–ß–ï–°–¢–í–ê:`);
                        const targetRTP = 0.96;
                        const rtpDeviation = Math.abs(rtp - targetRTP);
                        
                        if (rtpDeviation < 0.001) {
                            log(`‚úÖ –û–¢–õ–ò–ß–ù–û! RTP –æ—á–µ–Ω—å –±–ª–∏–∑–æ–∫ –∫ —Ü–µ–ª–µ–≤–æ–º—É (96.00%)`);
                        } else if (rtpDeviation < 0.005) {
                            log(`‚úÖ –•–û–†–û–®–û! RTP –±–ª–∏–∑–æ–∫ –∫ —Ü–µ–ª–µ–≤–æ–º—É (96.00%)`);
                        } else if (rtpDeviation < 0.01) {
                            log(`‚ö†Ô∏è  –£–î–û–í–õ–ï–¢–í–û–†–ò–¢–ï–õ–¨–ù–û! RTP –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö`);
                        } else {
                            log(`‚ùå –¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò! RTP —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ`);
                        }
                        
                        log(`üéØ –¶–µ–ª–µ–≤–æ–π RTP: ${(targetRTP * 100).toFixed(2)}%`);
                        log(`üìä –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π RTP: ${(rtp * 100).toFixed(4)}%`);
                        log(`üìè –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: ${(rtpDeviation * 100).toFixed(4)}%`);
                        
                        updateStats({
                            rtp: (rtp * 100).toFixed(4),
                            winRate: (winRate * 100).toFixed(2),
                            houseEdge: (houseEdge * 100).toFixed(4),
                            maxCrash: maxCrashPoint.toFixed(2),
                            maxWin: maxWin.toFixed(2),
                            duration: duration.toFixed(2),
                            speed: (rounds / duration).toLocaleString()
                        });
                        
                        resolve({
                            rtp, winRate, houseEdge, totalBets, totalPayouts,
                            wins, losses, maxCrashPoint, maxWin, duration, crashRanges
                        });
                    }
                }
                
                processBatch();
            });
        }

        // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–≤–µ–¥–µ–Ω–∏—è
        async function compareAllBehaviors(rounds) {
            log("\n" + "=".repeat(70));
            log("üî¨ –°–†–ê–í–ù–ï–ù–ò–ï –í–°–ï–• –í–ê–†–ò–ê–ù–¢–û–í –ü–û–í–ï–î–ï–ù–ò–Ø –ò–ì–†–û–ö–û–í");
            log("=".repeat(70));
            
            const results = [];
            
            log("\nüßÆ –¢–µ—Å—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ");
            results.push({name: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ", ...await testRTP(rounds, 'standard')});
            
            log("\nüßÆ –¢–µ—Å—Ç 2: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ");
            results.push({name: "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–µ", ...await testRTP(rounds, 'conservative')});
            
            log("\nüßÆ –¢–µ—Å—Ç 3: –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ");
            results.push({name: "–ü—Ä–æ—Å—Ç–æ–µ", ...await testRTP(rounds, 'simple')});
            
            log("\n" + "=".repeat(70));
            log("üìä –°–†–ê–í–ù–ï–ù–ò–ï –í–°–ï–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í");
            log("=".repeat(70));
            
            log(`\nüìà RTP:`);
            results.forEach(result => {
                log(`   ${result.name}: ${(result.rtp * 100).toFixed(4)}%`);
            });
            
            log(`\nüéØ –í–∏–Ω—Ä–µ–π—Ç:`);
            results.forEach(result => {
                log(`   ${result.name}: ${(result.winRate * 100).toFixed(2)}%`);
            });
            
            log(`\nüî• –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—Ä–∞—à:`);
            results.forEach(result => {
                log(`   ${result.name}: x${result.maxCrashPoint.toFixed(2)}`);
            });
            
            const targetRTP = 0.96;
            const bestResult = results.reduce((best, current) => {
                const currentDeviation = Math.abs(current.rtp - targetRTP);
                const bestDeviation = Math.abs(best.rtp - targetRTP);
                return currentDeviation < bestDeviation ? current : best;
            });
            
            log(`\nüèÜ –õ–£–ß–®–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢:`);
            log(`   ${bestResult.name}`);
            log(`   RTP: ${(bestResult.rtp * 100).toFixed(4)}%`);
            log(`   –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: ${(Math.abs(bestResult.rtp - targetRTP) * 100).toFixed(4)}%`);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats(stats) {
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <h3>üéØ RTP</h3>
                    <div class="stat-value">${stats.rtp}%</div>
                </div>
                <div class="stat-card">
                    <h3>üìä –í–∏–Ω—Ä–µ–π—Ç</h3>
                    <div class="stat-value">${stats.winRate}%</div>
                </div>
                <div class="stat-card">
                    <h3>üè† House Edge</h3>
                    <div class="stat-value">${stats.houseEdge}%</div>
                </div>
                <div class="stat-card">
                    <h3>üî• –ú–∞–∫—Å. –∫—Ä–∞—à</h3>
                    <div class="stat-value">x${stats.maxCrash}</div>
                </div>
                <div class="stat-card">
                    <h3>üí∞ –ú–∞–∫—Å. –≤—ã–∏–≥—Ä—ã—à</h3>
                    <div class="stat-value">${stats.maxWin}</div>
                </div>
                <div class="stat-card">
                    <h3>‚è±Ô∏è –í—Ä–µ–º—è</h3>
                    <div class="stat-value">${stats.duration}—Å</div>
                </div>
            `;
        }

        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ UI
        async function startTest() {
            const rounds = parseInt(document.getElementById('rounds').value);
            const behaviorType = document.getElementById('behaviorType').value;
            
            if (rounds < 1000 || rounds > 10000000) {
                alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1,000 –¥–æ 10,000,000');
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.querySelector('.btn').disabled = true;
            
            clearOutput();
            
            try {
                if (behaviorType === 'all') {
                    await compareAllBehaviors(Math.min(rounds, 100000));
                } else {
                    await testRTP(rounds, behaviorType);
                }
                
                log("\n" + "=".repeat(50));
                log("‚úÖ –§–ò–ù–ê–õ–¨–ù–û –ü–†–ê–í–ò–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!");
                log("=".repeat(50));
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.querySelector('.btn').disabled = false;
                updateProgress(100);
            }
        }

        function clearOutput() {
            document.getElementById('output').textContent = '';
            document.getElementById('statsGrid').innerHTML = '';
            updateProgress(0);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            log("üéÆ –§–ò–ù–ê–õ–¨–ù–û –ü–†–ê–í–ò–õ–¨–ù–´–ô —Ç–µ—Å—Ç RTP –¥–ª—è –∫—Ä–∞—à-–∏–≥—Ä—ã");
            log("=".repeat(50));
            log("üöÄ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏!");
            log("üìä –û–∂–∏–¥–∞–µ–º—ã–π RTP: ~96%");
            log("üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞: crashPoint = -ln(1 - random) / 0.96");
        });
    </script>
</body>
</html> 